import axios from 'axios';

export default async function handler(req, res) {
  // Proxy API requests to our backend
  try {
    const { data } = await axios({
      method: req.method,
      url: `${process.env.BACKEND_URL}${req.url.replace('/api', '')}`,
      data: req.body,
      headers: {
        ...req.headers,
        Authorization: req.headers.authorization || ''
      }
    });
    res.status(200).json(data);
  } catch (err) {
    const status = err.response?.status || 500;
    const data = err.response?.data || { message: 'Internal Server Error' };
    res.status(status).json(data);
  }
}
